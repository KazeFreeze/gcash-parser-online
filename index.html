<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GCash PDF Statement Parser</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Add PDF.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/5.0.375/pdf.min.mjs"></script>
    <script>
      // Configure PDF.js worker path
      if (window.pdfjsLib) {
        window.pdfjsLib.GlobalWorkerOptions.workerSrc =
          "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/5.0.375/pdf.worker.min.mjs";
      }
    </script>
    <!-- Local GCash PDF Parser library -->
    <script src="gcash-pdf-parser.min.js"></script>
  </head>
  <body>
    <div class="app-container">
      <header class="app-header">
        <div class="logo-container">
          <div class="logo">
            <span class="logo-icon">üìä</span>
            <h1>GCash Parser</h1>
          </div>
          <p class="tagline">
            Extract transactions from your GCash PDF statement directly in your
            browser
          </p>
        </div>
      </header>

      <div class="content-wrapper">
        <aside class="sidebar">
          <div class="privacy-card">
            <div class="card-header">
              <span class="icon">üîí</span>
              <h2>Privacy First</h2>
            </div>
            <p>
              All processing happens entirely in your browser. Your PDF file and
              password are
              <strong>never</strong> uploaded or sent to any server.
            </p>
          </div>

          <div class="donation-card">
            <div class="card-header">
              <span class="icon">‚ù§Ô∏è</span>
              <h2>Support This Project</h2>
            </div>
            <p>
              If this tool saved you time, consider supporting its development!
            </p>
            <img
              src="donations.jpg"
              alt="GCash QR Code - Scan to Donate"
              class="qr-code"
            />
            <p class="donation-label">GCash / Buy Me a Coffee</p>
          </div>
        </aside>

        <main class="main-content">
          <section class="upload-section">
            <div class="card">
              <div class="card-header">
                <span class="icon">üìÑ</span>
                <h2>Upload Statement</h2>
              </div>

              <form id="parser-form">
                <div class="form-group">
                  <label for="pdfFile">Select GCash PDF Statement</label>
                  <div class="file-input-wrapper">
                    <input type="file" id="pdfFile" accept=".pdf" required />
                    <div class="file-upload-button">
                      <span class="icon">üìé</span>
                      <span class="button-text">Choose File</span>
                    </div>
                    <span class="file-name" id="fileName">No file chosen</span>
                  </div>
                </div>

                <div class="form-group">
                  <label for="pdfPassword">PDF Password</label>
                  <div class="password-input-wrapper">
                    <input
                      type="password"
                      id="pdfPassword"
                      placeholder="Enter the password provided with your statement"
                      required
                    />
                    <button
                      type="button"
                      id="togglePassword"
                      class="toggle-password"
                    >
                      <span class="icon">üëÅÔ∏è</span>
                    </button>
                  </div>
                </div>

                <button type="submit" id="parseButton" class="primary-button">
                  <span class="icon">üîç</span>
                  <span>Parse PDF</span>
                </button>
              </form>

              <div
                id="status"
                class="status-message hidden"
                role="alert"
                aria-live="assertive"
              ></div>
            </div>
          </section>

          <section id="output-section" class="output-section hidden">
            <div class="card">
              <div class="card-header">
                <span class="icon">üìã</span>
                <h2>Extracted Transactions</h2>
                <button
                  id="downloadCsvButton"
                  class="secondary-button"
                  disabled
                >
                  <span class="icon">üì•</span>
                  <span>Download CSV</span>
                </button>
              </div>

              <div class="table-container">
                <table id="resultsTable">
                  <thead>
                    <tr>
                      <th>Date & Time</th>
                      <th>Description</th>
                      <th>Reference No</th>
                      <th>Debit</th>
                      <th>Credit</th>
                      <th>Balance</th>
                    </tr>
                  </thead>
                  <tbody id="resultsBody"></tbody>
                </table>
              </div>

              <p class="hint-text">
                You can select and copy data directly from the table
              </p>
            </div>
          </section>
        </main>
      </div>

      <footer class="app-footer">
        <p>
          Created by
          <a
            href="https://github.com/KazeFreeze"
            target="_blank"
            rel="noopener noreferrer"
          >
            Bernard G. Tapiru, Jr.
          </a>
          |
          <a
            href="https://github.com/KazeFreeze/gcash-pdf-parser"
            target="_blank"
            rel="noopener noreferrer"
          >
            View on GitHub
          </a>
        </p>
      </footer>
    </div>

    <script src="script.js"></script>
  </body>
</html>
